function initEcahrts(){let t="/pentaho/plugin/cda/api/doQuery?path=/public/dashboard/StoreOperation/StoreOperation.cda&dataAccessId=GaugeEchartsQuery",e=function(t){let e;return $.ajax({type:"get",url:t,async:!1,dataType:"json",data:null,success:function(t){e=t}}),e}(t+="&paramstartDay="+startDay+"&paramendDay="+endDay+"&parambrandParam="+brandParam+"&paramplaceParam="+placeParam+"&paramarea1Param="+area1Param+"&paramarea2Param="+area2Param+"&paramarea3Param="+area3Param+"&paramshopParam="+shopParam+"&paramoutletParam="+outletParam).resultset,a=echarts.init(document.getElementById("saleAmtGaugeDom_KPI")),i=function(){let t=function(){let t=[];for(let a=0;a<e.length;a++)t.push({name:e[a][0],value:e[a][1],selected:!0});return t};return{getDatas:function(){return t()}}}();!function(){a.setOption({title:{text:""},toolbox:{show:!0,feature:{}},tooltip:{trigger:"item",backgroundColor:"#ffffff",transitionDuration:.4,borderWidth:1,borderColor:"#ccc",textStyle:{color:"#4d4d4d",fontFamily:"TPF_Font_Thin",fontSize:14},axisPointer:{type:"cross"}},series:[{name:"营业额完成情况",type:"gauge",min:0,max:100,splitNumber:5,radius:"90%",axisLine:{lineStyle:{color:[[.2,"#0055B8"],[.8,"#FF9E16"],[1,"#D25459"]],width:14,shadowColor:"#E7EBED",type:"dotted",shadowBlur:20}},axisLabel:{textStyle:{fontWeight:"bolder",shadowColor:"#fff",shadowBlur:10}},axisTick:{show:!1,length:15,lineStyle:{color:"auto",shadowColor:"#fff",shadowBlur:10}},splitLine:{show:!1,length:25,lineStyle:{width:3,color:"#fff",shadowColor:"#fff",shadowBlur:10}},pointer:{shadowColor:"#E7EBED",shadowBlur:5},itemStyle:{normal:{color:"auto",borderColor:"#000",borderWidth:0,borderType:"solid",shadowOffsetX:0,shadowOffsetY:0},emphasis:{borderColor:"#000",borderWidth:0,borderType:"solid",shadowOffsetX:0,shadowOffsetY:0}},detail:{formatter:"{value}%",offsetCenter:[0,"65%"],textStyle:{fontSize:20}},data:[{name:"完成率",value:i.getDatas()[0].value}]}]})}();window.addEventListener("resize",function(){a.resize()})}function initAreaOrEmpQtyEcahrts(){Array.prototype.min=function(){let t=this[0],e=this.length;for(let a=1;a<e;a++)this[a]<t&&(t=this[a]);return t},Array.prototype.max=function(){let t=this[0],e=this.length;for(let a=1;a<e;a++)this[a]>t&&(t=this[a]);return t};let t="/pentaho/plugin/cda/api/doQuery?path=/public/dashboard/StoreOperation/StoreOperation.cda&dataAccessId=areaOrEmpQtyEffectiveQuery",e=function(t){let e;return $.ajax({type:"get",url:t,async:!1,dataType:"json",data:null,success:function(t){e=t}}),e}(t+="&paramstartDay="+startDay+"&paramendDay="+endDay+"&parambrandParam="+brandParam+"&paramplaceParam="+placeParam+"&paramarea1Param="+area1Param+"&paramarea2Param="+area2Param+"&paramarea3Param="+area3Param+"&paramshopParam="+shopParam+"&paramoutletParam="+outletParam).resultset,a=echarts.init(document.getElementById("areaOrEmpQtyEffectiveDom")),i=["#0055B8","#FF9E16","#009BDE","#71A087"],o=["门店总人效","门店总坪效"];!function(){a.setOption({color:i,tooltip:{trigger:"axis",backgroundColor:"#ffffff",transitionDuration:.4,borderWidth:1,borderColor:"#ccc",textStyle:{color:"#4d4d4d",fontFamily:"TPF_Font_Thin",fontSize:14},axisPointer:{type:"cross"}},grid:{},toolbox:{show:!0,feature:{dataZoom:{yAxisIndex:"none"},dataView:{show:!1,readOnly:!1},magicType:{type:["line","bar","stack","tiled"]},restore:{show:!0},saveAsImage:{show:!0}}},legend:{data:o.map((t,e,a)=>{let i=[];i.push({icon:"circle",name:t});return i[0]}),itemHeight:18,itemWidth:18,itemGap:5,itemWidth:10,itemHeight:10,textStyle:{fontWeight:"lighter",fontSize:7,fontFamily:"TPF_Font_Thin"},inactiveColor:"#aaa",padding:[5,10,35,10],shadowColor:"rgba(0, 0, 0, 0.5)",shadowBlur:5,zlevel:100},xAxis:[{type:"category",axisTick:{alignWithLabel:!0},data:e.map((t,e,a)=>t[0])}],yAxis:[{type:"value",name:o[0],min:0,max:e.map((t,e,a)=>t[2]).max(),position:"left",interval:Math.ceil(e.map((t,e,a)=>t[2]).max()/3),axisLine:{show:!1,lineStyle:{color:i[0]}},axisTick:{show:!1,length:10,lineStyle:{color:"green",type:"solid",width:2}},splitLine:{show:!1,lineStyle:{color:"#483d8b",type:"dotted",width:2}},axisLabel:{formatter:function(t){return t<1e6&&t>=1e3?Math.ceil(t/1e3)+"K":t>=1e6?Math.ceil(t/1e6)+"M":t<1e3&&t>=0?(t/1e3).toFixed(1)+"K":void 0}}},{type:"value",name:o[1],min:0,max:e.map((t,e,a)=>t[1]).max(),position:"right",interval:Math.ceil(e.map((t,e,a)=>t[1]).max()/3),axisLine:{show:!1,lineStyle:{color:i[1]}},axisTick:{show:!1,length:10,lineStyle:{color:"green",type:"solid",width:2}},splitLine:{show:!1,lineStyle:{color:"#483d8b",type:"dotted",width:2}},axisLabel:{formatter:function(t){return t<1e6&&t>=1e3?Math.ceil(t/1e3)+"K":t>=1e6?Math.ceil(t/1e6)+"M":t<1e3&&t>=0?(t/1e3).toFixed(1)+"K":void 0}}}],series:[{name:o[0],type:"bar",data:e.map((t,e,a)=>t[2])},{name:o[1],type:"bar",yAxisIndex:1,data:e.map((t,e,a)=>t[1])}]})}();window.addEventListener("resize",function(){a.resize()})}let StoreOperation={};StoreOperation.addCommas=(t=>{t+="";x=t.split(".");x1=x[0];x2=x.length>1?"."+x[1]:"";var e=/(\d+)(\d{3})/;for(;e.test(x1);)x1=x1.replace(e,"$1,$2");x2=x2.slice(0,3);return x1+x2}),StoreOperation.defaultBarSettings=function(){let t=this.chartDefinition;t.height=330,t.xAxisLabel_textAngle=-.1,t.legendShape="circle",t.selectable=!0,t.hoverable=!0,t.legendPosition="right",t.plotFrameVisible=!1,t.orthoAxisGrid=!0,t.orthoAxisTicks=!1,t.legendLabel_textStyle=function(t){return(0,this.panel.axes.color.scale)(this.getValue())},t.xAxisLabel_textAlign="right",t.xAxisLabel_textBaseline="top",t.format={number:"#,#.00",percent:"#.00%"},t.extensionPoints=[["xAxisRule_strokeStyle","white"],["yAxisRule_strokeStyle","white"],["y2AxisRule_strokeStyle","white"]],t.orthoAxisTickFormatter=function(t){return t<1e6&&t>=1e3?sprintf("%d",t/1e3)+"K":t>=1e6?sprintf("%d",t/1e6)+"M":sprintf("%d",t)},t.tooltipDelayIn=20,t.tooltipDelayOut=20,t.tooltipFade=!1,t.tooltipGravity="s",t.tooltipOpacity=1,t.tooltipFollowMouse=!0,t.tooltipFormat=function(){let t=this.getSeriesLabel();return"<div class='tooltipContainer'><div class='tooltipTitle'>"+this.getCategory()+"</div><div class='tooltipLabel'>"+t+"</div><div class='tooltipValue'>"+StoreOperation.addCommas(this.getValue().toFixed(2))+"</div></div>"},t.orthoAxisTitleFont="lighter 16px TPF_Font_Thin",t.axisLabel_font="lighter 16px TPF_Font_Thin",t.baseAxisLabel_textStyle="#4d4d4d",t.baseAxisLabel_visible=function(){return this.index%2==0},t.baseAxisRule_visible=!1,t.baseAxisTooltipEnabled=!1,t.orthoAxisLabel_textStyle="#999999",t.orthoAxisDesiredTickCount=2,t.orthoAxisGrid=!1,t.orthoAxisGrid_strokeStyle=function(){return this.index,this.scene.parent.childNodes.length,"#CCC"},t.orthoAxisGrid_lineWidth=function(){return this.index,this.scene.parent.childNodes.length,1},t.orthoAxisGrid_visible=!0,t.valuesAnchor="top",t.valuesVisible=!0,t.valuesFont="lighter 15px TPF_Font_Thin",t.colors=["#0055B8","#FF9E16","#D25459","#009BFF","#009BDE","#71A087"]},StoreOperation.defaultPieSettings=function(){let t=this.chartDefinition;t.colors=["#0055B8","#FF9E16","#D25459","#009BFF","#009BDE","#71A087"],t.legendShape="circle",t.selectable=!0,t.hoverable=!0,t.valuesFont="lighter 15px TPF_Font_Thin",t.format={number:"#,#.00",percent:"#.00%"},t.legendPosition="right",t.legendLabel_textStyle=function(t){return(0,this.panel.axes.color.scale)(this.getValue())},t.tooltipDelayIn=20,t.tooltipDelayOut=20,t.tooltipFade=!1,t.tooltipGravity="s",t.tooltipOpacity=1,t.tooltipFollowMouse=!0,t.tooltipFormat=function(){this.getSeriesLabel();return"<div class='tooltipContainer'><div class='tooltipTitle'>"+this.getCategory()+"</div><div class='tooltipValue'>"+StoreOperation.addCommas(this.getValue().toFixed(2))+"</div></div>"}};